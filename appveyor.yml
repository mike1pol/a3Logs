version: "{build}"
platform: x64
os: Windows Server 2012 R2

branches:
  only:
    - master

environment:
  GOPATH: c:\gopath
  GOARCH: amd64
  GOOS: windows

clone_folder: c:\gopath\src\github.com\mike1pol\a3Logs

install:
  - rmdir c:\go /s /q
  - appveyor DownloadFile https://storage.googleapis.com/golang/go1.11.windows-amd64.zip
  - 7z x go1.11.windows-amd64.zip -y -oC:\ > NUL
  - set PATH=%PATH%;%GOPATH%\bin\windows_%GOARCH%;%GOPATH%\bin
  - echo %PATH%
  - echo %GOPATH%
  - go version
  - go env
  - go get -v -t ./...

build_script:
  - go build -o a3Logs_x64.dll -buildmode=c-shared .

test: off

artifacts:
  - path: a3Logs_x64.dll
    name: binary

deploy: off
